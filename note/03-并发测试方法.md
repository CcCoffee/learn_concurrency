# å¹¶å‘æµ‹è¯•
å¹¶å‘æµ‹è¯•å¯ä»¥ä½¿ç”¨å·¥å…·æˆ–è€…ä½¿ç”¨ä»£ç 
## ä½¿ç”¨å·¥å…·å¹¶å‘æµ‹è¯•
å¸¸è§çš„æµ‹è¯•å·¥å…·æœ‰Postman, AB, jMeter
### Apache bench
`ab -n 1000 -c 50 http://localhost:8040/hello`
- è¯·æ±‚å‚æ•°
    * -n : è¯·æ±‚æ¬¡æ•°
    * -c : å¹¶å‘çº¿ç¨‹æ•°
- è¯·æ±‚ç»“æœ
    ```bash
    Document Path:          /hello
    Document Length:        11 bytes
    
    Concurrency Level:      50 # å¹¶å‘é‡
    Time taken for tests:   0.186 seconds # æ•´ä¸ªæµ‹è¯•æ‰€ç”¨æ—¶é—´
    Complete requests:      1000 # å®Œæˆçš„è¯·æ±‚æ•°
    Failed requests:        0
    Total transferred:      144000 bytes # æ‰€æœ‰è¯·æ±‚çš„å“åº”æ•°æ®çš„é•¿åº¦æ€»å’Œ(header + æ­£æ–‡)
    HTML transferred:       11000 bytes # æ‰€æœ‰è¯·æ±‚çš„å“åº”æ•°æ®çš„æ­£æ–‡æ•°æ®é•¿åº¦æ€»å’Œ
    # ååç‡ï¼Œå®ƒä¸å¹¶å‘æ•°ç›¸å…³ï¼Œå³ä½¿è¯·æ±‚æ€»æ•°ç›¸åŒï¼Œä½†å¦‚æœå¹¶å‘æ•°ä¸ä¸€æ ·ï¼Œååç‡ä¹Ÿæœ‰å¾ˆå¤§å·®å¼‚
    # Complete requests / Time taken for tests
    Requests per second:    5365.35 [#/sec] (mean)
    Time per request:       9.319 [ms] (mean) # ç”¨æˆ·å¹³å‡è¯·æ±‚ç­‰å¾…æ—¶é—´
    # æœåŠ¡å™¨å¹³å‡è¯·æ±‚ç­‰å¾…æ—¶é—´
    Time per request:       0.186 [ms] (mean, across all concurrent requests)
    # è¯·æ±‚å•ä½æ—¶é—´å†…ä»æœåŠ¡å™¨è·å–çš„æ•°æ®é•¿åº¦ï¼ŒTotal transferred / Time taken for tests
    Transfer rate:          754.50 [Kbytes/sec] received
    
    Connection Times (ms)
                  min  mean[+/-sd] median   max
    Connect:        0    3   3.3      2      24
    Processing:     1    6   4.9      4      29
    Waiting:        1    5   4.0      4      25
    Total:          3    9   6.4      6      36
    
    Percentage of the requests served within a certain time (ms)
      50%      6
      66%      7
      75%      8
      80%     12
      90%     19
      95%     23
      98%     31
      99%     32
     100%     36 (longest request)
    ```
## ä½¿ç”¨ä»£ç è¿›è¡Œå¹¶å‘æµ‹è¯•
### CountDownLatch
é˜»å¡çº¿ç¨‹ï¼Œå¹¶ä¸”åœ¨è¾¾åˆ°æŸç§æ¡ä»¶ä¸‹æ¢å¤çº¿ç¨‹ã€‚
* åº”ç”¨åœºæ™¯
  - å¯ç”¨äºé™åˆ¶è¯·æ±‚æ€»æ•°ï¼Œå¹¶åœ¨æ‰€æœ‰è¯·æ±‚æ‰§è¡Œå®Œåå†è¿›è¡Œå…¶ä»–æ“ä½œã€‚
### Semaphore
é€‚åˆäºæ§åˆ¶åŒæ—¶å¹¶å‘çš„çº¿ç¨‹æ•°ã€‚å°±åƒé«˜é€Ÿè·¯ä¸Šçš„é€šé“æ•°ï¼Œé€šé“è¶Šå¤šèƒ½åŒæ—¶é€šè¿‡çš„ğŸš—è¶Šå¤š
* åº”ç”¨åœºæ™¯
  - å¯ç”¨äºæ¨¡æ‹ŸåŒæ—¶è¯·æ±‚çš„ç”¨æˆ·æ•°
### CountDownLatchä¸Semaphoreç»“åˆä½¿ç”¨
åœ¨æ¨¡æ‹Ÿå¹¶å‘æµ‹è¯•çš„æ—¶å€™å¹¶åœ¨æ‰€æœ‰çº¿ç¨‹æ‰§è¡Œå®Œè¾“å‡ºä¸€äº›ç»“æœï¼Œä½¿ç”¨CountDownLatchä¸Semaphoreç»“åˆèµ·æ¥ä½¿ç”¨ã€‚
